<html lang="en">

<head th:replace="fragments/head :: headFragment"></head>

<head>
    <link rel="stylesheet" href="css/customerInvoice.css">
</head>

<body>
    <div class="sidebar">
        <div th:replace="fragments/sidebar :: sidebarFragment"></div>
    </div>
    <div class="main-content">
        <div th:replace="fragments/topbar :: topbarFragment"></div>
        <div class="container-fluid">

            <!-- Title  and add button-->
            <div class="row align-items-center justify-content-between mb-2">
                <div class="col-auto">
                </div>
                <div class="col-auto">
                    <!-- Button trigger modal -->
                    <button type="button" class="btn-3d btn-3d-submit" data-bs-toggle="modal" id="floatingRateBookingInvoiceGenerateButton"
                        data-bs-target="#allInvoicemodal" onclick="createInvoiceNo();allBookingInvoice()" style="display:none;">
                        Generate All Bookings Invoice
                    </button>

                    <!-- Button trigger modal -->
                    <button type="button" class="btn-3d btn-3d-submit" data-bs-toggle="modal" id="fixRateBookingInvoiceGenerateButton"
                            data-bs-target="#invoiceviewformFixrate" onclick="createInvoiceNo();allBookingInvoiceFixRate()" style="display:none;">
                        Generate All Bookings Invoice
                    </button>
                </div>

            </div>
            <!-- serarch area -->
            <div class="main-card mb-3">
                <div class="row">
                    <div class="col-2"></div>
                    <div class="col-3">
                        <label for="selectCustomerForInvoice" class="form-label">Customer Name</label>
                        <select id="selectCustomerForInvoice" class="form-select">
                            <option>Select Customer</option>
                        </select>
                    </div>
                    <div class="col-3">
                        <label for="selectVehicleTypeForInvoice" class="form-label">Vehicle Type </label>
                        <select id="selectVehicleTypeForInvoice" class="form-select">
                            <option value=" ">Select Vehicle Type</option>
                        </select>
                    </div>
                    <div class="col-3">
                        <label for="selectPackageTypeForInvoice" class="form-label">Agreement Type</label>
                        <select id="selectPackageTypeForInvoice" class="form-select">
                            <option value="">Select Agreement Type</option>
                            <option value="Floating Rate">Floating Rate</option>
                            <option value="Fix Rate">Fix Rate</option>
                        </select>
                    </div>
                    <div class="col-1 mt-4">
                        <button class="btn btn-search mt-3" data-bs-toggle="tooltip" data-bs-placement="top"
                            data-bs-title="Search" onclick="loadInvoiceTable()"><i class="fas fa-search"></i></button>
                        <button class="btn btn-reset mt-3" data-bs-toggle="tooltip" data-bs-placement="top"
                            data-bs-title="Reset" onclick="refresh()"><i class="fa-solid fa-rotate-right"></i></button>
                    </div>

                </div>
            </div>
            <!-- Main Table Card -->
            <div class="main-card mb-3">
                <!-- Table Area -->
                <div class="table-responsive">

                    <!-- table area -->
                    <table class="table" id="customerPaymentInvoiceTable">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Booking No</th>
                                <th>Company Name</th>
                                <th>Distance</th>
                                <th>Amount</th>
                                <th id="actionButtonView">Action</th>
                            </tr>
                        </thead>
                        <tbody id="customerPaymentTableInvoiceBody">
                        </tbody>
                    </table>
                    <!-- table area -->
                </div>

            </div>

            <div class="main-card mb-3">
                <!-- Table Area -->
                <div class="table-responsive">

                    <!-- table area -->
                    <table class="table" id="customerPaymentInvoiceTableFixedRate">
                        <thead>
                        <tr>
                            <th>#</th>
                            <th>Booking No</th>
                            <th>Company Name</th>
                            <th>Distance</th>
                            <th>Amount</th>
                        </tr>
                        </thead>
                        <tbody id="customerPaymentTableInvoiceBodyFixedRate">
                        </tbody>
                    </table>
                    <!-- table area -->
                </div>

            </div>
        </div>
    </div>
    <!-- Modal for view invoice floating rate-->
    <div class="modal fade" id="invoiceviewform"  data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content rounded-5">
                <div class="modal-body p-5" >
                    <div id="singleBookingInvoice">
                        <div class="invoice-container" >
                            <!-- Header -->
                            <div class="invoice-header d-flex justify-content-between align-items-center">
                                <div>
                                    <div class="invoice-title">INVOICE</div>
                                    <div class="invoice-subtitle">
                                        Invoice #: <strong id="viewInvoiceNo" ></strong><br />
                                        Date: <strong id="viewCurrentDate"></strong>
                                    </div>
                                </div>
                                <div>
                                    <img src="/images/header-logo.png" alt="Company Logo" />
                                </div>
                            </div>

                            <!-- Sender / Recipient -->
                            <div class="row details-box">
                                <div class="col-md-6">
                                    <div class="section-title">From</div>
                                    <p class="mb-1"><strong>OKI-DOKI Pvt Ltd</strong></p>
                                    <p>No 390, Avissawella Road<br />Wellampitiya, Sri Lanka<br />+94 11 747 4747</p>
                                </div>
                                <div class="col-md-6 text-md-end mt-4 mt-md-0">
                                    <div class="section-title text-end">To</div>
                                    <p class="mb-1"><strong id="viewCustomername"></strong></p>
                                    <p class="m-0" id="viewCustomerAddress"></p>
                                    <p class="m-0" id="viewCustomerEmail"></p>
                                    <p  class="m-0" id="viewCustomerMobile"></p>
                                </div>
                            </div>
                            <div class="d-flex justify-content-between align-items-center mb-4">
                                <p class="mb-1">Booking No: <strong id="viewBookingNo"></strong></p>
                                <p class="mb-1">Booking Date: <strong id="viewBookingDate"></strong></p>
                            </div>
                            <!-- Table -->
                            <div class="table-responsive mb-4">
                                <table class="table table-bordered text-center align-middle" id="invoiceTable">
                                    <thead>
                                    <tr>
                                        <th>Description</th>
                                        <th>Distance</th>
                                        <th>Rate/km</th>
                                        <th>Total</th>
                                    </tr>
                                    </thead>
                                    <tbody id="invoiceTableBody">
                                    <tr>
                                        <td>Booking Distance</td>
                                        <td id="viewDistanceQuantity"></td>
                                        <td id="viewDistanceRate"></td>
                                        <td id="viewDistanceTotal"></td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>

                            <!-- Summary -->
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="section-title">Bank Account Details</div>
                                    <p class="mb-1">Bank Name: <strong id="viewPaymentMethod">People's Bank</strong></p>
                                    <p class="mb-1">Branch No: <strong >Ward Place</strong></p>
                                    <p class="mb-1">Account No: <strong id="viewPaymentStatus">239-2-451-89121-1215</strong></p>
                                    <p class="mb-1">When are you making payment through the bank please enter Invoice No as Reference</p>
                                </div>
                                <div class="col-md-6">
                                    <div class="total-box">
                                        <p>Subtotal: <span class="ms-4" id="subtotalValue"></span> </p>
                                        <p>Tax (18%):   <span class="ms-4" id="taxValue"></span></p>
                                        <p><strong>Total:    <span class="ms-4" id="lastTotalValue"></span></strong></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Generate Button -->
                    <div class="d-flex justify-content-end mt-4" style="padding-right: 40px">
                        <button class="btn-3d btn-3d-cancel me-3" data-bs-dismiss="modal" aria-label="Close" onclick="clearCustomerPaymentObject()">Close</button>
                        <button class="btn-3d btn-3d-submit" onclick="inovoicGenearteButtonForFloatingRate()">Generate Invoice</button>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <!--all bookings  Modal for floating rate-->
    <!-- Modal -->
    <div class="modal fade" id="allInvoicemodal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-body">
                    <div class="invoice-container">
                        <!-- Header -->
                        <div class="invoice-header d-flex justify-content-between align-items-center">
                            <div>
                                <div class="invoice-title">INVOICE</div>
                                <div class="invoice-subtitle">
                                    Invoice #: <strong id="viewAllBookingInvoiceNo" ></strong><br />
                                    Date: <strong id="viewAllBookingCurrentDate"></strong>
                                </div>
                            </div>
                            <div>
                                <img src="/images/header-logo.png" alt="Company Logo" />
                            </div>
                        </div>

                        <!-- Sender / Recipient -->
                        <div class="row details-box">
                            <div class="col-md-6">
                                <div class="section-title">From</div>
                                <p class="mb-1"><strong>OKI-DOKI Pvt Ltd</strong></p>
                                <p>No 390, Avissawella Road<br />Wellampitiya, Sri Lanka<br />+94 11 747 4747</p>
                            </div>
                            <div class="col-md-6 text-md-end mt-4 mt-md-0">
                                <div class="section-title text-end">To</div>
                                <p class="mb-1"><strong id="viewAllInvocieCustomername"></strong></p>
                                <p class="m-0" id="viewAllInvocieCustomerAddress"></p>
                                <p class="m-0" id="viewAllInvocieCustomerEmail"></p>
                                <p  class="m-0" id="viewAllInvocieCustomerMobile"></p>
                            </div>
                        </div>
                         <div id="bookingsSumary"></div>
                        <!-- Generate Button -->
                        <div class="d-flex justify-content-end mt-4">
                            <button class="btn-3d btn-3d-cancel me-3" data-bs-dismiss="modal" aria-label="Close" onclick="clearCustomerPaymentObject()">Close</button>
                            <button class="btn-3d btn-3d-submit" onclick="inovoicGenearteButtonForFloatingRate()">Generate Invoice</button>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- Modal for view invoice for fixrate-->
    <div class="modal fade" id="invoiceviewformFixrate" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
         aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content rounded-5">
                <div class="modal-body p-5" >
                    <div id="fixrateBookingInvoice">
                        <div class="invoice-container" >
                            <!-- Header -->
                            <div class="invoice-header d-flex justify-content-between align-items-center">
                                <div>
                                    <div class="invoice-title">INVOICE</div>
                                    <div class="invoice-subtitle">
                                        Invoice #: <strong id="viewInvoiceNoFixedRate" ></strong><br />
                                        Date: <strong id="viewCurrentDateFixedRate"></strong>
                                    </div>
                                </div>
                                <div>
                                    <img src="/images/header-logo.png" alt="Company Logo" />
                                </div>
                            </div>

                            <!-- Sender / Recipient -->
                            <div class="row details-box">
                                <div class="col-md-6">
                                    <div class="section-title">From</div>
                                    <p class="mb-1"><strong>OKI-DOKI Pvt Ltd</strong></p>
                                    <p>No 390, Avissawella Road<br />Wellampitiya, Sri Lanka<br />+94 11 747 4747</p>
                                </div>
                                <div class="col-md-6 text-md-end mt-4 mt-md-0">
                                    <div class="section-title text-end">To</div>
                                    <p class="mb-1"><strong id="viewCustomernameFixedRate"></strong></p>
                                    <p class="m-0" id="viewCustomerAddressFixedRate"></p>
                                    <p class="m-0" id="viewCustomerEmailFixedRate"></p>
                                    <p  class="m-0" id="viewCustomerMobileFixedRate"></p>
                                </div>
                            </div>
                            <!-- Table -->
                            <div class="table-responsive mb-4">
                                <table class="table table-bordered text-center align-middle" id="invoiceFixedRateTable">
                                    <thead>
                                    <tr>
                                        <th>No</th>
                                        <th>Booking No</th>
                                        <th>Booking Date</th>
                                        <th>Distance(Km)</th>
                                    </tr>
                                    </thead>
                                    <tbody id="invoiceFixedRateTableBody">

                                    </tbody>
                                </table>
                            </div>
                            <div class="row">

                            </div>

                            <!-- Summary -->
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="section-title">Bank Account Details</div>
                                    <p class="mb-1">Bank Name: <strong >People's Bank</strong></p>
                                    <p class="mb-1">Branch No: <strong >Ward Place</strong></p>
                                    <p class="mb-1">Account No: <strong >239-2-451-89121-1215</strong></p>
                                    <p class="mb-1">When are you making payment through the bank please enter Invoice No as Reference</p>
                                </div>
                                <div class="col-md-6">
                                    <div class="total-box">
                                        <p>Subtotal: <span class="ms-4" id="subtotalValueFixedRate"></span> </p>
                                        <p>Tax (18%):   <span class="ms-4" id="taxValueFixedRate"></span></p>
                                        <p><strong>Total:    <span class="ms-4" id="lastTotalValueFixedRate"></span></strong></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Generate Button -->
                    <div class="d-flex justify-content-end mt-4" style="padding-right: 40px" >
                        <button class="btn-3d btn-3d-cancel me-3" data-bs-dismiss="modal" aria-label="Close" onclick="clearCustomerPaymentObject()">Close</button>
                        <button class="btn-3d btn-3d-submit" onclick="inovoiceGenearteButtonForFixRate()" id="fixrateGenerateButton">Generate Invoice</button>
                    </div>

                </div>
            </div>
        </div>
    </div>
        <div th:replace="fragments/loading :: overlayFragment"></div>

        <script src="/commenjs/reusabal.js"></script>
        <script src="/commenjs/commanValidation.js"></script>
        <script src="/commenjs/commonTable.js"></script>
        <script src="js/customerInvoice.js"></script>
        <script src="js/sidebar.js"></script>
</body>

</html>